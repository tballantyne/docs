sudo -i
yum -y update
yum -y install net-tools bind-utils vim wget yum-cron unzip
sed -i 's/apply_updates = no/apply_updates = yes/' /etc/yum/yum-cron.conf
systemctl start yum-cron.service
systemctl status yum-cron.service
wget http://s3.amazonaws.com/ec2-downloads/ec2-api-tools.zip
mkdir /usr/local/ec2
unzip ec2-api-tools.zip -d /usr/local/ec2

scp -i /<path>/key.pem ~/Downloads/jdk-8u40-linux-x64.rpm centos@xx.xx.xx.xx:
rpm -Uvh ~/jdk-8u40-linux-x64.rpm
alternatives --install /usr/bin/java java /usr/java/jdk1.8.0_40/jre/bin/java 200000
alternatives --install /usr/bin/javaws javaws /usr/java/jdk1.8.0_40/jre/bin/javaws 200000
alternatives --install /usr/bin/javac javac /usr/java/jdk1.8.0_40/bin/javac 200000
alternatives --install /usr/bin/jar jar /usr/java/jdk1.8.0_40/bin/jar 200000

alternatives --install /usr/bin/java java /usr/java/jre1.8.0_40/bin/java 200000
 
java -version
javaws
javac -version

alternatives --config java
alternatives --config javaws
alternatives --config libjavaplugin.so.x86_64
alternatives --config javac

export JAVA_HOME="/usr/java/jdk1.8.0_40"
export JAVA_HOME="/usr/java/jre1.8.0_40"

# http://www.if-not-true-then-false.com/2014/install-oracle-java-8-on-fedora-centos-rhel/

which java
file $(which java)
file /etc/alternatives/java
file /usr/java/jdk1.8.0_40/jre/bin/java
export JAVA_HOME="/usr/java/jdk1.8.0_40/jre/bin/java"
export EC2_HOME=/usr/local/ec2/ec2-api-tools-1.7.3.2
export PATH=$PATH:$EC2_HOME/bin
<continue>

# http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html#setting_up_ec2_command_linux


yum -y install git
git clone git://git.kernel.org/pub/scm/git/git.git
git config --global user.name "First Last"
git config --global user.email user@domain.com
git config --global core.editor vim

# http://git-scm.com/book/en/v2

####
#### ffmpeg installation ####
####

yum install autoconf automake gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel

# Yasm is an assembler used by x264 and FFmpeg.

cd ~/ffmpeg_sources
git clone --depth 1 git://github.com/yasm/yasm.git
cd yasm
autoreconf -fiv
./configure --prefix="$HOME/ffmpeg_build" --bindir="$HOME/bin"
make
make install
make distclean


# H.264 video encoder.
# Requires ffmpeg to be configured with --enable-gpl --enable-libx264.

cd ~/ffmpeg_sources
git clone --depth 1 git://git.videolan.org/x264
cd x264
./configure --prefix="$HOME/ffmpeg_build" --bindir="$HOME/bin" --enable-static
make
make install
make distclean


# AAC audio encoder.
# Requires ffmpeg to be configured with --enable-libfdk_aac (and --enable-nonfree if you also included --enable-gpl).

cd ~/ffmpeg_sources
git clone --depth 1 git://git.code.sf.net/p/opencore-amr/fdk-aac
cd fdk-aac
autoreconf -fiv
./configure --prefix="$HOME/ffmpeg_build" --disable-shared
make
make install
make distclean


# MP3 audio encoder.
# Requires ffmpeg to be configured with --enable-libmp3lame.

cd ~/ffmpeg_sources
curl -L -O http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz
tar xzvf lame-3.99.5.tar.gz
cd lame-3.99.5
./configure --prefix="$HOME/ffmpeg_build" --bindir="$HOME/bin" --disable-shared --enable-nasm
make
make install
make distclean

# Opus audio decoder and encoder.
# Requires ffmpeg to be configured with --enable-libopus.

cd ~/ffmpeg_sources
git clone git://git.opus-codec.org/opus.git
cd opus
autoreconf -fiv
./configure --prefix="$HOME/ffmpeg_build" --disable-shared
make
make install
make distclean


# Ogg bitstream library. Required by libtheora and libvorbis.

cd ~/ffmpeg_sources
curl -O http://downloads.xiph.org/releases/ogg/libogg-1.3.2.tar.gz
tar xzvf libogg-1.3.2.tar.gz
cd libogg-1.3.2
./configure --prefix="$HOME/ffmpeg_build" --disable-shared
make
make install
make distclean

# Vorbis audio encoder. Requires libogg.
# Requires ffmpeg to be configured with --enable-libvorbis.

cd ~/ffmpeg_sources
curl -O http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.4.tar.gz
tar xzvf libvorbis-1.3.4.tar.gz
cd libvorbis-1.3.4
./configure --prefix="$HOME/ffmpeg_build" --with-ogg="$HOME/ffmpeg_build" --disable-shared
make
make install
make distclean


# VP8/VP9 video encoder.
# Requires ffmpeg to be configured with --enable-libvpx.

cd ~/ffmpeg_sources
git clone --depth 1 https://chromium.googlesource.com/webm/libvpx.git
cd libvpx
./configure --prefix="$HOME/ffmpeg_build" --disable-examples
make
make install
make clean

cd ~/ffmpeg_sources
git clone --depth 1 git://source.ffmpeg.org/ffmpeg
cd ffmpeg
PKG_CONFIG_PATH="$HOME/ffmpeg_build/lib/pkgconfig" ./configure --prefix="$HOME/ffmpeg_build" --extra-cflags="-I$HOME/ffmpeg_build/include" --extra-ldflags="-L$HOME/ffmpeg_build/lib" --bindir="$HOME/bin" --enable-gpl --enable-nonfree --enable-libfdk_aac --enable-libmp3lame --enable-libopus --enable-libvorbis --enable-libvpx --enable-libx264
make
make install
make distclean
hash -r

# https://trac.ffmpeg.org/wiki/CompilationGuide/Centos

FFREPORT=file=ffreport_emea.log:level=40 ffmpeg -i <rtmp stream> -f null /dev/null

